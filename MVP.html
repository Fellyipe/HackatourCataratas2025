<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EloTur - Pacote de Benef√≠cios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Cores conforme Identidade Visual */
        :root {
            --color-primary: #1B324F; /* Azul Escuro */
            --color-secondary: #10B981; /* Verde Teal */
            --color-action: #3B82F6; /* Azul Claro para bot√µes */
        }
        body { font-family: 'Inter', sans-serif; background-color: #F3F4F6; }
        .page-content { display: none; min-height: 70vh; }
        .active-page { display: block; }
        .bg-elotur-primary { background-color: var(--color-primary); }
        .text-elotur-primary { color: var(--color-primary); }
        .bg-elotur-secondary { background-color: var(--color-secondary); }
        .text-elotur-secondary { color: var(--color-secondary); }
        .btn-primary { background-color: var(--color-action); }

        /* Estilo Mobile-First para H√≥spede */
        @media (max-width: 768px) {
            #guest-app { max-width: 100%; padding: 0; }
            #guest-app .guest-card-container { padding: 1rem; }
            .mobile-padding { padding: 1rem; }
        }
        /* Simula√ß√£o de Modal/Feedback */
        #feedback-modal {
            position: fixed; top: 20px; right: 20px; z-index: 50; 
            padding: 1rem; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            max-width: 300px;
        }
    </style>
</head>
<body>
    
    <!-- Configura√ß√£o de Cores Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'elotur-primary': '#1B324F', 
                        'elotur-secondary': '#10B981',
                    },
                }
            }
        }
    </script>

    <!-- Global State e Mock Data -->
    <script>
        const mockPartners = [
            { id: 1, name: "Restaurante Sabor Regional", category: "Gastronomia", discount: "20% OFF no Almo√ßo Executivo", useCount: 154, logoText: "SR", logoColor: "bg-amber-500" },
            { id: 2, name: "C√¢nions Expedi√ß√µes", category: "Passeios", discount: "30% OFF em qualquer trilha guiada", useCount: 89, logoText: "CE", logoColor: "bg-elotur-secondary" },
            { id: 3, name: "Transfer VIP Foz", category: "Transporte", discount: "R$ 15 OFF em corridas para o aeroporto", useCount: 210, logoText: "TV", logoColor: "bg-elotur-primary" },
            { id: 4, name: "Loja de Artesanato Local", category: "Compras", discount: "10% de desconto em toda a loja", useCount: 75, logoText: "LA", logoColor: "bg-purple-500" },
        ];
        
        let partnerData = [...mockPartners]; // Estado local para simular incremento de uso

        const partnerCategoryMap = {
            "Gastronomia": "üçΩÔ∏è", "Passeios": "üèûÔ∏è", "Transporte": "üöå", "Compras": "üõçÔ∏è"
        };
        
        const totalUses = partnerData.reduce((sum, p) => sum + p.useCount, 0);

        // Distribui√ß√£o de Uso por Categoria para o gr√°fico do Hotel
        function getCategoryDistribution() {
            const distribution = {};
            partnerData.forEach(p => {
                distribution[p.category] = (distribution[p.category] || 0) + p.useCount;
            });
            const total = Object.values(distribution).reduce((sum, count) => sum + count, 0);
            return Object.keys(distribution).map(category => ({
                category,
                count: distribution[category],
                percent: total > 0 ? (distribution[category] / total) * 100 : 0
            }));
        }

        // Simula√ß√£o de Navega√ß√£o
        function showPage(pageId) {
            document.querySelectorAll('.page-content').forEach(section => {
                section.classList.remove('active-page');
            });
            const target = document.getElementById(pageId);
            if (target) {
                target.classList.add('active-page');
                window.scrollTo({ top: 0, behavior: 'smooth' });
                if (pageId === 'hotel-dashboard') renderHotelDashboard();
                if (pageId === 'partner-dashboard') renderPartnerDashboard();
                if (pageId === 'guest-app') renderGuestApp();
            }
        }

        // Fun√ß√£o de Feedback (Modal)
        function showFeedback(message, isSuccess = true) {
            const modal = document.getElementById('feedback-modal');
            modal.textContent = message;
            modal.className = 'transition duration-300 transform';
            modal.classList.add(isSuccess ? 'bg-elotur-secondary text-white' : 'bg-red-500 text-white', 'opacity-100', 'translate-y-0');
            modal.style.display = 'block';

            setTimeout(() => {
                modal.classList.remove('opacity-100', 'translate-y-0');
                modal.classList.add('opacity-0', '-translate-y-full');
                setTimeout(() => { modal.style.display = 'none'; }, 500);
            }, 3000);
        }

        // -----------------------------------------------------
        // INTERFACE 1: HOTEL DASHBOARD
        // -----------------------------------------------------
        function renderHotelDashboard() {
            const listingsContainer = document.getElementById('hotel-partner-listings');
            const chartContainer = document.getElementById('usage-chart');
            const dist = getCategoryDistribution();
            
            // Renderizar Cards de Estat√≠sticas
            document.getElementById('total-uses-card').innerHTML = totalUses.toLocaleString();

            // Renderizar Gr√°fico de Distribui√ß√£o (simulado com flex/divs)
            chartContainer.innerHTML = '';
            dist.sort((a, b) => b.count - a.count).forEach(item => {
                const color = item.category === 'Gastronomia' ? 'bg-amber-500' 
                            : item.category === 'Passeios' ? 'bg-elotur-secondary'
                            : item.category === 'Transporte' ? 'bg-elotur-primary'
                            : 'bg-purple-500';

                chartContainer.innerHTML += `
                    <div class="mb-4">
                        <div class="flex justify-between text-sm text-gray-700">
                            <span>${item.category}</span>
                            <span>${item.count} (${item.percent.toFixed(1)}%)</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="${color} h-2.5 rounded-full" style="width: ${item.percent}%;"></div>
                        </div>
                    </div>
                `;
            });

            // Renderizar Lista de Desempenho
            listingsContainer.innerHTML = partnerData.sort((a, b) => b.useCount - a.useCount).map(p => `
                <tr class="border-b hover:bg-gray-50 transition duration-150">
                    <td class="p-4 text-gray-800 font-medium">${p.name}</td>
                    <td class="p-4 text-elotur-secondary">${partnerCategoryMap[p.category]} ${p.category}</td>
                    <td class="p-4 text-lg font-bold">${p.useCount}</td>
                    <td class="p-4 text-gray-600">${p.discount}</td>
                </tr>
            `).join('');
        }

        function handleGenerateQrCode() {
            const qrCodeDiv = document.getElementById('qr-code-display');
            qrCodeDiv.innerHTML = `
                <div class="text-center p-6 bg-white border border-dashed border-gray-400 rounded-lg">
                    <p class="text-gray-500 mb-2">QR Code Gerado em: ${new Date().toLocaleTimeString()}</p>
                    <div class="w-24 h-24 mx-auto bg-gray-800 flex items-center justify-center text-white font-bold text-lg">
                        [QR Mock]
                    </div>
                    <p class="mt-2 text-elotur-primary font-semibold">V√°lido para check-ins de hoje.</p>
                </div>
            `;
            showFeedback("‚úÖ Novo QR Code gerado com sucesso! Pronto para impress√£o.", true);
        }

        // -----------------------------------------------------
        // INTERFACE 2: PARCEIRO DASHBOARD
        // -----------------------------------------------------
        function renderPartnerDashboard() {
            const partner1 = partnerData[0]; // Usamos o primeiro como exemplo
            document.getElementById('partner-metric-main').textContent = partner1.useCount.toLocaleString();
            document.getElementById('partner-name-display').textContent = partner1.name;
        }

        function handleValidateCode(event) {
            event.preventDefault();
            const codeInput = document.getElementById('validation-code');
            const code = codeInput.value.toUpperCase().trim();
            const validationMessage = document.getElementById('validation-message');

            // Simula√ß√£o de c√≥digos v√°lidos/inv√°lidos
            if (code.startsWith('ELO-HOSP-')) {
                // Simula que o c√≥digo √© v√°lido e pertence ao Parceiro 1 (Restaurante)
                if (code.includes('1A2B3C')) {
                    // Simula uma nova utiliza√ß√£o
                    partnerData[0].useCount += 1; 
                    renderPartnerDashboard(); // Atualiza a m√©trica principal
                    
                    validationMessage.className = 'text-elotur-secondary mt-3 font-semibold';
                    validationMessage.textContent = '‚úÖ C√≥digo V√°lido! Desconto Aplicado com Sucesso. (Uso registrado)';
                    showFeedback("‚úÖ Uso validado e registrado!", true);
                } else {
                    validationMessage.className = 'text-red-500 mt-3 font-semibold';
                    validationMessage.textContent = '‚ùå C√≥digo Inv√°lido ou Expirado. Por favor, verifique.';
                    showFeedback("‚ùå C√≥digo Inv√°lido!", false);
                }
            } else if (code === '') {
                 validationMessage.className = 'text-red-500 mt-3 font-semibold';
                 validationMessage.textContent = 'Digite o c√≥digo para validar.';
            } else {
                validationMessage.className = 'text-red-500 mt-3 font-semibold';
                validationMessage.textContent = '‚ùå Formato de c√≥digo inv√°lido (Ex: ELO-HOSP-...).';
                showFeedback("‚ùå Formato Inv√°lido!", false);
            }
            codeInput.value = '';
        }

        // -----------------------------------------------------
        // INTERFACE 3: H√ìSPEDE APP
        // -----------------------------------------------------
        
        let activeBenefitCode = null; // Para rastrear qual c√≥digo est√° sendo exibido

        function renderGuestApp() {
            const container = document.getElementById('guest-benefits-list');
            container.innerHTML = '';

            partnerData.forEach(p => {
                const icon = partnerCategoryMap[p.category] || 'üéÅ';
                
                // Checa se este benef√≠cio est√° com o c√≥digo ativo
                const isActiveCode = activeBenefitCode === p.id;
                
                const buttonContent = isActiveCode ? 
                    `<span class="text-xl font-mono">${p.name.slice(0, 3).toUpperCase()}-HOSP-${p.id}A2B3C</span>` : 
                    `Usar Agora / Gerar C√≥digo`;
                
                const buttonClass = isActiveCode ? 
                    'bg-gray-800 text-white font-extrabold text-center py-3' : 
                    'bg-elotur-secondary hover:bg-elotur-secondary/90 text-white font-bold py-2';
                
                const actionText = isActiveCode ? 
                    `<p class="text-xs text-red-500 font-semibold mt-2">Mostre este c√≥digo ao estabelecimento!</p>` : '';
                
                container.innerHTML += `
                    <div class="bg-white p-4 rounded-xl shadow-lg border border-gray-100">
                        <div class="flex items-center space-x-3 mb-2">
                            <span class="text-3xl">${icon}</span>
                            <div>
                                <h3 class="text-lg font-bold text-elotur-primary">${p.name}</h3>
                                <p class="text-xs text-gray-500">${p.category}</p>
                            </div>
                        </div>
                        <div class="mb-4">
                            <p class="text-2xl font-extrabold text-elotur-secondary">${p.discount}</p>
                            <p class="text-xs text-gray-500">Oferta v√°lida durante sua estadia.</p>
                        </div>
                        <button id="benefit-btn-${p.id}" 
                                onclick="handleGenerateGuestCode(${p.id})" 
                                class="w-full rounded-lg transition duration-300 ${buttonClass}">
                            ${buttonContent}
                        </button>
                        ${actionText}
                    </div>
                `;
            });
        }

        function handleGenerateGuestCode(id) {
            // Se j√° for o c√≥digo ativo, desativa. Se for outro, ativa.
            activeBenefitCode = (activeBenefitCode === id) ? null : id;
            
            if (activeBenefitCode === id) {
                 showFeedback("üéâ C√≥digo gerado! Use-o em at√© 1 hora.", true);
            } else {
                 showFeedback("C√≥digo ocultado.", false);
            }
            
            renderGuestApp();
        }

        // Inicia a aplica√ß√£o na p√°gina Home
        document.addEventListener('DOMContentLoaded', () => {
            showPage('home');
        });

    </script>
    
    <!-- Modal de Feedback (Global) -->
    <div id="feedback-modal" class="hidden opacity-0 -translate-y-full"></div>

    <!-- Cabe√ßalho (Header) - Fixo para todas as interfaces B2B -->
    <header class="bg-elotur-primary text-white shadow-xl sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-3xl font-extrabold cursor-pointer" onclick="showPage('home')">
                <span class="text-elotur-secondary">Elo</span>Tur
            </h1>
            <!-- Menu de Navega√ß√£o B2B -->
            <nav class="space-x-4">
                <a class="text-gray-300 hover:text-white font-medium cursor-pointer" onclick="showPage('hotel-dashboard')">Hotel</a>
                <a class="text-gray-300 hover:text-white font-medium cursor-pointer" onclick="showPage('partner-dashboard')">Parceiro</a>
                <a class="text-gray-300 hover:text-white font-medium cursor-pointer" onclick="showPage('guest-app')">H√≥spede (Simula√ß√£o)</a>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">

        <!-- 0. P√°gina Inicial (Home) -->
        <section id="home" class="page-content active-page py-16 text-center bg-white rounded-xl shadow-2xl">
            <div class="max-w-4xl mx-auto mobile-padding">
                <p class="text-elotur-secondary font-bold text-lg mb-2">üìà Novo Modelo: Valor Agregado</p>
                <h2 class="text-4xl sm:text-5xl font-extrabold text-elotur-primary mb-6 leading-tight">
                    EloTur: O Pacote de <span class="text-elotur-secondary">Benef√≠cios</span> que transforma a estadia.
                </h2>
                <p class="text-lg text-gray-600 mb-10">
                    A plataforma conecta Hot√©is a Parceiros Locais, oferecendo aos h√≥spedes descontos exclusivos 
                    em Gastronomia, Passeios e Transporte, gerando satisfa√ß√£o para o turista e ROI para o hotel.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <button onclick="showPage('hotel-dashboard')" class="bg-elotur-primary hover:bg-elotur-primary/90 text-white font-bold py-4 rounded-xl transition duration-300 shadow-lg transform hover:scale-[1.02]">
                        1. Painel do Hotel (B2B)
                    </button>
                    <button onclick="showPage('partner-dashboard')" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 rounded-xl transition duration-300 shadow-lg transform hover:scale-[1.02]">
                        2. Painel do Parceiro (B2B)
                    </button>
                    <button onclick="showPage('guest-app')" class="bg-elotur-secondary hover:bg-elotur-secondary/90 text-white font-bold py-4 rounded-xl transition duration-300 shadow-lg transform hover:scale-[1.02]">
                        3. Acesso do H√≥spede (B2C)
                    </button>
                </div>
            </div>
        </section>

        <!-- 1. Interface 1: Painel do Hotel (Hotel Dashboard) -->
        <section id="hotel-dashboard" class="page-content">
            <h2 class="text-3xl font-extrabold text-elotur-primary mb-6">Painel do Hotel: Gest√£o de Benef√≠cios e ROI</h2>
            
            <!-- Linha de Status e M√©tricas Chave -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Status Assinatura -->
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-elotur-secondary">
                    <p class="text-sm font-semibold text-gray-500">Status da Assinatura</p>
                    <h3 class="text-2xl font-extrabold text-elotur-secondary">Plano Ativo: Deluxe</h3>
                    <p class="text-sm text-gray-600 mt-1">Pr√≥xima Cobran√ßa: 01/M√™s</p>
                </div>
                <!-- Uso Total -->
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-elotur-primary">
                    <p class="text-sm font-semibold text-gray-500">Uso Total do M√™s (Valida√ß√µes)</p>
                    <h3 id="total-uses-card" class="text-4xl font-extrabold text-elotur-primary">0</h3>
                    <p class="text-sm text-gray-600 mt-1">Aumento de 8% em rela√ß√£o ao m√™s anterior.</p>
                </div>
                <!-- A√ß√£o Principal -->
                <div class="bg-white p-6 rounded-xl shadow-md flex flex-col justify-center items-center">
                    <p class="text-sm font-semibold text-gray-500 mb-3">Material de Divulga√ß√£o</p>
                    <button onclick="handleGenerateQrCode()" class="w-full bg-elotur-primary hover:opacity-90 text-white font-bold py-3 rounded-lg transition duration-300">
                        Gerar Novo QR Code do Hotel
                    </button>
                    <div id="qr-code-display" class="mt-4 w-full"></div>
                </div>
            </div>

            <!-- Relat√≥rio Detalhado e Gr√°fico -->
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h3 class="text-xl font-bold text-gray-800 mb-4">An√°lise de Engajamento do H√≥spede</h3>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Distribui√ß√£o de Uso por Categoria -->
                    <div>
                        <h4 class="text-lg font-semibold text-elotur-secondary mb-3">Uso por Categoria (Gr√°fico)</h4>
                        <div id="usage-chart" class="p-2">
                            <!-- Gr√°fico simulado -->
                        </div>
                    </div>
                    <!-- Lista de Desempenho -->
                    <div>
                        <h4 class="text-lg font-semibold text-elotur-primary mb-3">Top Parceiros por Utiliza√ß√£o</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Parceiro</th>
                                        <th class="p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categoria</th>
                                        <th class="p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Usos</th>
                                        <th class="p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Oferta</th>
                                    </tr>
                                </thead>
                                <tbody id="hotel-partner-listings" class="bg-white divide-y divide-gray-200">
                                    <!-- Dados Injetados por JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 2. Interface 2: Painel do Parceiro (Partner Dashboard) -->
        <section id="partner-dashboard" class="page-content">
            <h2 class="text-3xl font-extrabold text-elotur-primary mb-6">Painel do Parceiro: Monitoramento de Clientes</h2>
            
            <div class="max-w-3xl mx-auto">
                <p class="text-xl font-bold text-center text-gray-800 mb-6">Bem-vindo(a), <span id="partner-name-display" class="text-elotur-primary"></span></p>

                <!-- M√©trica Principal -->
                <div class="bg-white p-8 rounded-xl shadow-lg text-center mb-8 border-t-4 border-elotur-secondary">
                    <p class="text-sm font-semibold text-gray-500 uppercase">Clientes EloTur Recebidos no M√™s</p>
                    <h3 id="partner-metric-main" class="text-7xl font-extrabold text-elotur-secondary my-4">0</h3>
                    <p class="text-gray-600">Esses clientes foram trazidos diretamente da rede hoteleira parceira.</p>
                </div>

                <!-- Funcionalidade de Valida√ß√£o -->
                <div class="bg-white p-8 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Valida√ß√£o de C√≥digo de H√≥spede</h3>
                    <p class="text-gray-600 mb-4">Insira o c√≥digo √∫nico apresentado pelo h√≥spede para registrar o uso do benef√≠cio.</p>

                    <form onsubmit="handleValidateCode(event)">
                        <label for="validation-code" class="block text-sm font-medium text-gray-700 mb-2">C√≥digo √önico (Ex: ELO-HOSP-1A2B3C)</label>
                        <input type="text" id="validation-code" required class="w-full p-4 border-2 border-gray-300 rounded-lg text-xl text-center tracking-widest uppercase focus:border-elotur-secondary focus:ring-elotur-secondary" placeholder="ELO-HOSP-..." maxlength="15">
                        <button type="submit" class="w-full mt-4 bg-elotur-primary hover:opacity-90 text-white font-bold py-3 rounded-lg transition duration-300">
                            Validar Uso
                        </button>
                    </form>
                    <p id="validation-message" class="text-center mt-3"></p>
                </div>
            </div>
        </section>
        
        <!-- 3. Interface 3: Acesso do H√≥spede (Guest Benefit App) -->
        <section id="guest-app" class="page-content">
            <div class="max-w-md mx-auto bg-white rounded-xl shadow-2xl mobile-padding">
                <!-- Cabe√ßalho H√≥spede -->
                <div class="bg-elotur-secondary text-white p-6 rounded-t-xl text-center">
                    <p class="text-sm font-semibold mb-1">Pacote de Benef√≠cios EloTur</p>
                    <h2 class="text-2xl font-extrabold">Ol√°, H√≥spede do Hotel Vista Bela!</h2>
                </div>
                <!-- Badge de Validade -->
                <div class="bg-yellow-100 text-yellow-800 p-3 text-center font-medium flex justify-center items-center space-x-2">
                    <span class="text-lg">‚è∞</span>
                    <p>V√°lido por mais 3 dias (T√©rmino da estadia).</p>
                </div>
                
                <div class="p-4 space-y-4 guest-card-container">
                    <h3 class="text-xl font-bold text-elotur-primary mb-3">Seus Benef√≠cios Exclusivos:</h3>
                    <div id="guest-benefits-list" class="space-y-4">
                        <!-- Cards de Benef√≠cio Injetados por JS -->
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Rodap√© (Footer) -->
    <footer class="bg-gray-800 text-white mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-sm">
            <p>¬© 2025 EloTur. Conectando Hot√©is, Parceiros e H√≥spedes.</p>
        </div>
    </footer>

</body>
</html>
